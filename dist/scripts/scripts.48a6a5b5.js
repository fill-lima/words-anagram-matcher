"use strict";function MainController(a,b){var c=this;c.cleanWords=function(){c.fileContent=[],c.anagrams=b.create(c.fileContent)},c.cleanWords(),a.updateAnagrams=function(a){c.fileContent=a,c.anagrams=b.create(a)}}function CsvReader(){function a(a,d){d.bind("change",function(e){var f,g,h=e.target.files;if(d.parent().hasClass("has-error")&&(d.parent().removeClass("has-error"),d.next().remove()),!b(h[0])){d.parent().addClass("has-error");var i=document.createElement("div");return i.innerHTML="File need to be a CSV format",i.className="bg-danger",d.parent().append(i),!1}h.length&&(d.attr("disabled",!0),f=new FileReader,f.onload=function(b){d.attr("disabled",!1),g=b.target.result,a.$apply(function(){a.callback({csv:c(g)})})},f.readAsText(h[0]))})}function b(a){return"csv"===a.name.slice(-3).toLowerCase()}function c(a){var b,c=a.split(/\r\n|\n/),d=c[0].split(","),e=[];return d.length?(c.forEach(function(a){b=a.split(","),b.length===d.length&&e.push(b)}),e):e}return{scope:{callback:"&"},restrict:"A",link:a}}function Anagram(){function a(a){var c=[],d=[],e=b(a),f=0,g=0,h=0;for(var i in e)f+=e[i].length,e[i].length>1?(g+=e[i].length,c.push(e[i])):(h+=e[i].length,d.push(e[i][0]));return c.sort(function(a,b){return b.length-a.length}),{wordsCount:f,anagramsCount:g,notAnagramsCount:h,anagrams:c,notAnagrams:d}}function b(a){var b,d={};return a.forEach(function(a){a.forEach(function(a){if(b=c(a),b.length)return d[b]?void d[b].push(a):void(d[b]=[a])})}),d}function c(a){return a.split("").sort().join("")}return{create:function(b){return a(b)}}}angular.module("wordsAnagramMatcherApp",[]),MainController.$inject=["$scope","anagram"],angular.module("wordsAnagramMatcherApp").controller("MainCtrl",MainController),angular.module("wordsAnagramMatcherApp").directive("csvReader",CsvReader),angular.module("wordsAnagramMatcherApp").service("anagram",Anagram),angular.module("wordsAnagramMatcherApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row"> <div class="jumbotron"> <h2>Select your CSV file:</h2> <div class="form-group"> <input type="file" name="csvFile" class="form-control" accept=".csv" callback="updateAnagrams(csv)" csv-reader> </div> <button class="btn btn-danger" ng-click="vm.cleanWords()" ng-if="vm.anagrams.wordsCount">Clean</button> </div> </div> <div class="row description"> <div ng-if="vm.anagrams.wordsCount"> <div ng-if="!vm.anagrams.anagrams.length"> <h5>We did not find anagrams :(</h5> </div> <div ng-if="vm.anagrams.anagrams.length"> <h5><b>{{ vm.anagrams.anagrams.length }}</b> anagrams found ({{vm.anagrams.anagramsCount}} words):</h5> <div class="anagrams-placeholder"> <div class="col-xs-12 col-sm-4 anagram-group" ng-repeat="anagram in vm.anagrams.anagrams"> <ul class="list-unstyled"> <li ng-repeat="word in anagram">{{ word }}</li> </ul> </div> </div> </div> <div ng-if="vm.anagrams.notAnagrams.length"> <h5><b>{{ vm.anagrams.notAnagramsCount }}</b> words without anagrams:</h5> <div class="anagrams-placeholder"> <div class="col-xs-12 anagram-group"> <ul class="list-unstyled"> <li ng-repeat="word in vm.anagrams.notAnagrams">{{ word }}</li> </ul> </div> </div> </div> </div> <div ng-if="!vm.anagrams.wordsCount"> <h3>What is an anagram?</h3> <p> An anagram is a rearrangement of the letters of one word or phrase to form another word or phrase.<br> A example of an anagram is rearranging the letters of "Evil" to get "Vile". </p> <p>Download an example of <a href="csv/english-words-example.csv" target="_blank">CSV file</a> to test the platform.</p> </div> </div>')}]);